generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Level {
  id                   String               @id @default(uuid())
  name                 String
  slug                 String               @unique
  description          String?
  color                String?              // Tailwind color class prefix (e.g., "emerald", "blue")
  bgColor              String?              // Background color class
  borderColor          String?              // Border color class
  emoji                String?              // Level emoji
  icon                 String?              // Icon name for the level
  order                Int                  @default(0)
  isPaid               Boolean              @default(false) // Premium level flag
  users                User[]
  leasons              Leasons[]
  createdAt            DateTime             @default(now())
  updatedAt            DateTime             @updatedAt
  userLeasonProgresses UserLeasonProgress[]
}

model User {
  id                      String    @id @default(uuid())
  firstName               String
  lastName                String
  email                   String    @unique
  password                String
  levelId                 String?
  level                   Level?    @relation(fields: [levelId], references: [id])
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  userLeasonProgresses    UserLeasonProgress[]
  isVerified              Boolean   @default(false)
  subscribed              Boolean   @default(false)
  verificationCode        String?
  verificationCodeExpiry  DateTime?
  role                    String    @default("user")
}

model Leasons {
  id                   String               @id @default(uuid())
  slug                 String               @unique
  title                String
  description          String
  explanation          String
  exampleCommand       String
  hint                 String
  objective            String
  levelId              String
  level                Level                @relation(fields: [levelId], references: [id])
  isPaid               Boolean              @default(false)
  order                Int                  @default(0)
  category             String?
  completionPattern    String?
  practiceTask         String?
  isFoundation         Boolean              @default(false)
  createdAt            DateTime             @default(now())
  updatedAt            DateTime             @updatedAt
  userLeasonProgresses UserLeasonProgress[]
}

model UserLeasonProgress {
  id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id])
  leasonId    String
  leason      Leasons  @relation(fields: [leasonId], references: [id])
  levelId     String
  level       Level    @relation(fields: [levelId], references: [id])
  completedAt DateTime @default(now())
  isCompleted Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([userId, leasonId])
}

model GitCommandCategory {
  id          String       @id @default(uuid())
  name        String       @unique
  label       String
  icon        String
  commands    GitCommand[]
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
}

model GitCommand {
  id          String             @id @default(uuid())
  name        String             @unique
  syntax      String
  description String
  whenToUse   String
  example     String
  categoryId  String
  category    GitCommandCategory @relation(fields: [categoryId], references: [id])
  isCommon    Boolean            @default(false)
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
}

model Tip {
  id          String   @id @default(uuid())
  type        TipType
  title       String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum TipType {
  warning
  pro
  do
  dont
}

// FAQ items for the landing page
model FAQ {
  id          String   @id @default(uuid())
  question    String
  answer      String
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Achievements that users can unlock
model Achievement {
  id          String   @id @default(uuid())
  slug        String   @unique
  title       String
  description String
  icon        String   // Icon name (trophy, star, zap, award, target, rocket)
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// User achievements tracking
model UserAchievement {
  id            String      @id @default(uuid())
  userId        String
  achievementId String
  unlockedAt    DateTime    @default(now())
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@unique([userId, achievementId])
}

// Benefits for "Why Learn Git" section
model Benefit {
  id          String   @id @default(uuid())
  title       String
  description String
  icon        String   // Lucide icon name
  color       String   // Tailwind color class
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Target audiences for "Who Is This For" section
model Audience {
  id          String   @id @default(uuid())
  title       String
  description String
  emoji       String
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Playground features list
model PlaygroundFeature {
  id          String   @id @default(uuid())
  text        String
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Cheat sheet command sections (replacing hardcoded gitDocs.ts)
model CheatSheetSection {
  id          String              @id @default(uuid())
  slug        String              @unique
  title       String
  order       Int                 @default(0)
  isActive    Boolean             @default(true)
  commands    CheatSheetCommand[]
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
}

model CheatSheetCommand {
  id          String            @id @default(uuid())
  command     String
  syntax      String
  description String
  example     String
  notes       String?
  difficulty  Difficulty?
  sectionId   String
  section     CheatSheetSection @relation(fields: [sectionId], references: [id])
  order       Int               @default(0)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
}

enum Difficulty {
  beginner
  intermediate
  advanced
}
